#!/usr/bin/env bash
# Configures Nginx server so that /redirect_me redirects to another page with a 301 status.

# Update and install Nginx
sudo apt-get update -y
sudo apt-get install -y nginx

# Create a basic index.html file for testing
echo "Holberton School" | sudo tee /var/www/html/index.html

# Create the Nginx server block with redirection
sudo bash -c 'cat << EOF > /etc/nginx/sites-available/default
server {
    listen 80;
    server_name _;

    # Redirect /redirect_me to the target URL with a 301 status
    location /redirect_me {
        return 301 https://github.com/Uri-x/;
    }

    # Default root configuration
    location / {
        root /var/www/html;
        index index.html;
    }
}
EOF'

# Test the Nginx configuration to ensure it's valid
sudo nginx -t

# Restart Nginx to apply the new configuration
sudo systemctl restart nginx

